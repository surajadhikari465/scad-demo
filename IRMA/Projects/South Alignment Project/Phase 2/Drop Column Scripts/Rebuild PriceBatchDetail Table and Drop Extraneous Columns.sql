/******************************************************************************
		1. Rebuild PriceBatchDetail Table and Drop Extraneous Columns
******************************************************************************/
PRINT N'Status: 1. Rebuild PriceBatchDetail Table and Drop Extraneous Columns --- [dbo].[PriceBatchDetail] --- ' + CONVERT(NVARCHAR(MAX), SYSDATETIME(), 9)
GO	
PRINT N'Status: Approximate Target End Time for Script to Complete: --- [dbo].[PriceBatchDetail] --- ' + CONVERT(NVARCHAR(MAX), DATEADD(MINUTE, 5, SYSDATETIME()), 9)
GO
USE ItemCatalog
--USE ItemCatalog_Test
GO
SET NOCOUNT ON;
GO
/******************************************************************************
		2. Drop SO Defaults (Manually Generated)
******************************************************************************/
PRINT N'Status: 2. Drop SO Defaults (Manually Generated) --- [dbo].[PriceBatchDetail] --- ' + CONVERT(NVARCHAR(MAX), SYSDATETIME(), 9)
GO
IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF__PriceBatc__Print__218E7BFA]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] DROP CONSTRAINT [DF__PriceBatc__Print__218E7BFA]
GO
IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF__PriceBatc__LineD__2282A033]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] DROP CONSTRAINT [DF__PriceBatc__LineD__2282A033]
GO
IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF__PriceBatc__Compe__745E44D5]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] DROP CONSTRAINT [DF__PriceBatc__Compe__745E44D5]
GO
IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF__PriceBatc__Local__6DF13E68]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] DROP CONSTRAINT [DF__PriceBatc__Local__6DF13E68]
GO
IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF_PriceBatchDetail_GlutenFreeTag]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] DROP CONSTRAINT [DF_PriceBatchDetail_GlutenFreeTag]
GO
IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF_PriceBatchDetail_Deleted_Item]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] DROP CONSTRAINT [DF_PriceBatchDetail_Deleted_Item]
GO
IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF_PriceBatchDetail_Insert_Date]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] DROP CONSTRAINT [DF_PriceBatchDetail_Insert_Date]
GO
IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF_PriceBatchDetail_AutoGenerated]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] DROP CONSTRAINT [DF_PriceBatchDetail_AutoGenerated]
GO
IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF_PriceBatchDetail_Expired]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] DROP CONSTRAINT [DF_PriceBatchDetail_Expired]
GO
IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF_PriceBatchDetail_EndedEarly]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] DROP CONSTRAINT [DF_PriceBatchDetail_EndedEarly]
GO
IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF__PriceBatc__ReAut__477A8878]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] DROP CONSTRAINT [DF__PriceBatc__ReAut__477A8878]
GO
/******************************************************************************
		3. Drop Foreign Keys on SO PriceBatchDetail
******************************************************************************/
PRINT N'Status: 3. Drop Foreign Keys on SO PriceBatchDetail... ' + CONVERT(NVARCHAR(MAX), SYSDATETIME(), 9);
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_Store]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] DROP CONSTRAINT [FK_PriceBatchDetail_Store]
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_Retail_Unit_ID]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] DROP CONSTRAINT [FK_PriceBatchDetail_Retail_Unit_ID]
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_PromotionalOffer1]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] DROP CONSTRAINT [FK_PriceBatchDetail_PromotionalOffer1]
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_PriceChgType]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] DROP CONSTRAINT [FK_PriceBatchDetail_PriceChgType]
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_PriceBatchHeader]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] DROP CONSTRAINT [FK_PriceBatchDetail_PriceBatchHeader]
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_Package_Unit_ID]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] DROP CONSTRAINT [FK_PriceBatchDetail_Package_Unit_ID]
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_OfferChgTypeID]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] DROP CONSTRAINT [FK_PriceBatchDetail_OfferChgTypeID]
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_LinkCode]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] DROP CONSTRAINT [FK_PriceBatchDetail_LinkCode]
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_ItemChgType]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] DROP CONSTRAINT [FK_PriceBatchDetail_ItemChgType]
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_Item]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] DROP CONSTRAINT [FK_PriceBatchDetail_Item]
GO
IF  EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'IX_PriceBatchDetail_POSPushSearch')
DROP INDEX [IX_PriceBatchDetail_POSPushSearch] ON [dbo].[PriceBatchDetail]
GO
IF  EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'IX_PriceBatchDetail_ItemKey_INC_10_POISPMPSPP')
DROP INDEX [IX_PriceBatchDetail_ItemKey_INC_10_POISPMPSPP] ON [dbo].[PriceBatchDetail]
GO
/******************************************************************************
		4. Drop Indexes on SO PriceBatchDetail
******************************************************************************/
PRINT N'Status: 4. Drop Indexes on SO PriceBatchDetail... ' + CONVERT(NVARCHAR(MAX), SYSDATETIME(), 9);
GO
IF  EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'idxPriceBatchHeader')
DROP INDEX [idxPriceBatchHeader] ON [dbo].[PriceBatchDetail]
GO
IF  EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'idxPriceBatchDetail_StoreItem')
DROP INDEX [idxPriceBatchDetail_StoreItem] ON [dbo].[PriceBatchDetail]
GO
IF  EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'_dta_index_PriceBatchDetail_StoreNo')
DROP INDEX [_dta_index_PriceBatchDetail_StoreNo] ON [dbo].[PriceBatchDetail]
GO
IF  EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'_dta_index_PriceBatchDetail_PBHID')
DROP INDEX [_dta_index_PriceBatchDetail_PBHID] ON [dbo].[PriceBatchDetail]
GO
IF  EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'_dta_index_PriceBatchDetail_Expired')
DROP INDEX [_dta_index_PriceBatchDetail_Expired] ON [dbo].[PriceBatchDetail]
GO
IF  EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'_dta_index_PriceBatchDetail_7_2037582297__K75_K2_K3_K6_K1_K7_K4_K5_K15_24_56')
DROP INDEX [_dta_index_PriceBatchDetail_7_2037582297__K75_K2_K3_K6_K1_K7_K4_K5_K15_24_56] ON [dbo].[PriceBatchDetail]
GO
IF  EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'_dta_index_PriceBatchDetail_7_2037582297__K4_K56_K3_K75_K2_1_5_6_7_15_24')
DROP INDEX [_dta_index_PriceBatchDetail_7_2037582297__K4_K56_K3_K75_K2_1_5_6_7_15_24] ON [dbo].[PriceBatchDetail]
GO
IF  EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'_dta_index_PriceBatchDetail_7_2037582297__K3_K5_K2_K1_K7_K4_K75_6_15_24_56')
DROP INDEX [_dta_index_PriceBatchDetail_7_2037582297__K3_K5_K2_K1_K7_K4_K75_6_15_24_56] ON [dbo].[PriceBatchDetail]
GO
/******************************************************************************
		5. Drop Columns on SO PriceBatchDetail
******************************************************************************/
PRINT N'Status: 5. Drop Columns on SO PriceBatchDetail... ' + CONVERT(NVARCHAR(MAX), SYSDATETIME(), 9);
GO
ALTER TABLE [dbo].[PriceBatchDetail]
DROP COLUMN [Competitive],
	COLUMN [CompetitiveLastChecked],
	COLUMN [CompetitiveMultiple],
	COLUMN [CompetitivePrice],
	COLUMN [GlutenFreeTag],
	COLUMN [LocalTag],
	COLUMN [Tax_Table_A],
	COLUMN [Tax_Table_B],
	COLUMN [Tax_Table_C],
	COLUMN [Tax_Table_D];
GO
/******************************************************************************
		6. Create Indexes from FL PriceBatchDetail
******************************************************************************/
PRINT N'Status: 6. Create Indexes from FL PriceBatchDetail... ' + CONVERT(NVARCHAR(MAX), SYSDATETIME(), 9);
GO
IF NOT EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'IX_PriceBatchDetail_PriceChgType')
CREATE NONCLUSTERED INDEX [IX_PriceBatchDetail_PriceChgType] ON [dbo].[PriceBatchDetail]
(
	[PriceChgTypeID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 80) ON [PRIMARY]
GO
ALTER INDEX [IX_PriceBatchDetail_PriceChgType] ON [dbo].[PriceBatchDetail] DISABLE
GO
IF NOT EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'IX_PriceBatchDetail_StartDate')
CREATE NONCLUSTERED INDEX [IX_PriceBatchDetail_StartDate] ON [dbo].[PriceBatchDetail]
(
	[StartDate] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 80) ON [PRIMARY]
GO
ALTER INDEX [IX_PriceBatchDetail_StartDate] ON [dbo].[PriceBatchDetail] DISABLE
GO
IF NOT EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]') AND name = N'IX_PriceBatchDetail_Store')
CREATE NONCLUSTERED INDEX [IX_PriceBatchDetail_Store] ON [dbo].[PriceBatchDetail]
(
	[Store_No] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 80) ON [PRIMARY]
GO
/******************************************************************************
		7. Create Foreign Keys from FL PriceBatchDetail
******************************************************************************/
PRINT N'Status: 7. Create Foreign Keys from FL PriceBatchDetail... ' + CONVERT(NVARCHAR(MAX), SYSDATETIME(), 9);
GO
IF NOT EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_Item]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail]  WITH CHECK ADD  CONSTRAINT [FK_PriceBatchDetail_Item] FOREIGN KEY([Item_Key])
REFERENCES [dbo].[Item] ([Item_Key])
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_Item]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] CHECK CONSTRAINT [FK_PriceBatchDetail_Item]
GO
IF NOT EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_ItemChgType]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail]  WITH CHECK ADD  CONSTRAINT [FK_PriceBatchDetail_ItemChgType] FOREIGN KEY([ItemChgTypeID])
REFERENCES [dbo].[ItemChgType] ([ItemChgTypeID])
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_ItemChgType]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] CHECK CONSTRAINT [FK_PriceBatchDetail_ItemChgType]
GO
IF NOT EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_LinkCode]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail]  WITH CHECK ADD  CONSTRAINT [FK_PriceBatchDetail_LinkCode] FOREIGN KEY([LinkedItem])
REFERENCES [dbo].[Item] ([Item_Key])
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_LinkCode]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] CHECK CONSTRAINT [FK_PriceBatchDetail_LinkCode]
GO
IF NOT EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_OfferChgTypeID]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail]  WITH NOCHECK ADD  CONSTRAINT [FK_PriceBatchDetail_OfferChgTypeID] FOREIGN KEY([OfferChgTypeID])
REFERENCES [dbo].[OfferChgType] ([OfferChgTypeID])
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_OfferChgTypeID]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] CHECK CONSTRAINT [FK_PriceBatchDetail_OfferChgTypeID]
GO
IF NOT EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_Package_Unit_ID]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail]  WITH CHECK ADD  CONSTRAINT [FK_PriceBatchDetail_Package_Unit_ID] FOREIGN KEY([Package_Unit_ID])
REFERENCES [dbo].[ItemUnit] ([Unit_ID])
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_Package_Unit_ID]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] CHECK CONSTRAINT [FK_PriceBatchDetail_Package_Unit_ID]
GO
IF NOT EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_PriceBatchHeader]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail]  WITH CHECK ADD  CONSTRAINT [FK_PriceBatchDetail_PriceBatchHeader] FOREIGN KEY([PriceBatchHeaderID])
REFERENCES [dbo].[PriceBatchHeader] ([PriceBatchHeaderID])
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_PriceBatchHeader]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] CHECK CONSTRAINT [FK_PriceBatchDetail_PriceBatchHeader]
GO
IF NOT EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_PriceChgType]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail]  WITH CHECK ADD  CONSTRAINT [FK_PriceBatchDetail_PriceChgType] FOREIGN KEY([PriceChgTypeID])
REFERENCES [dbo].[PriceChgType] ([PriceChgTypeID])
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_PriceChgType]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] CHECK CONSTRAINT [FK_PriceBatchDetail_PriceChgType]
GO
IF NOT EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_PromotionalOffer1]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail]  WITH CHECK ADD  CONSTRAINT [FK_PriceBatchDetail_PromotionalOffer1] FOREIGN KEY([Offer_ID])
REFERENCES [dbo].[PromotionalOffer] ([Offer_ID])
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_PromotionalOffer1]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] CHECK CONSTRAINT [FK_PriceBatchDetail_PromotionalOffer1]
GO
IF NOT EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_Retail_Unit_ID]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail]  WITH CHECK ADD  CONSTRAINT [FK_PriceBatchDetail_Retail_Unit_ID] FOREIGN KEY([Retail_Unit_ID])
REFERENCES [dbo].[ItemUnit] ([Unit_ID])
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_Retail_Unit_ID]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] CHECK CONSTRAINT [FK_PriceBatchDetail_Retail_Unit_ID]
GO
IF NOT EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_Store]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail]  WITH CHECK ADD  CONSTRAINT [FK_PriceBatchDetail_Store] FOREIGN KEY([Store_No])
REFERENCES [dbo].[Store] ([Store_No])
GO
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_PriceBatchDetail_Store]') AND parent_object_id = OBJECT_ID(N'[dbo].[PriceBatchDetail]'))
ALTER TABLE [dbo].[PriceBatchDetail] CHECK CONSTRAINT [FK_PriceBatchDetail_Store]
GO
/******************************************************************************
		8. Create FL Defaults (manually generated)
******************************************************************************/
PRINT N'Status: 8. Create FL Defaults (manually generated) --- [dbo].[PriceBatchDetail] --- ' + CONVERT(NVARCHAR(MAX), SYSDATETIME(), 9)
GO
IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF__PriceBatc__Print__218E7BFA]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] WITH NOCHECK ADD CONSTRAINT [DF__PriceBatc__Print__218E7BFA] DEFAULT ((0))
	FOR [PrintSign]
GO
IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF__PriceBatc__LineD__2282A033]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] WITH NOCHECK ADD CONSTRAINT [DF__PriceBatc__LineD__2282A033] DEFAULT ((0))
	FOR [LineDrive]
GO
IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF_PriceBatchDetail_Deleted_Item]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] WITH NOCHECK ADD CONSTRAINT [DF_PriceBatchDetail_Deleted_Item] DEFAULT ((0))
	FOR [Deleted_Item]
GO
IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF_PriceBatchDetail_Insert_Date]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] WITH NOCHECK ADD CONSTRAINT [DF_PriceBatchDetail_Insert_Date] DEFAULT (getdate())
	FOR [Insert_Date]
GO
IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF_PriceBatchDetail_AutoGenerated]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] WITH NOCHECK ADD CONSTRAINT [DF_PriceBatchDetail_AutoGenerated] DEFAULT ((0))
	FOR [AutoGenerated]
GO
IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF_PriceBatchDetail_Expired]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] WITH NOCHECK ADD CONSTRAINT [DF_PriceBatchDetail_Expired] DEFAULT ((0))
	FOR [Expired]
GO
IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF_PriceBatchDetail_EndedEarly]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] WITH NOCHECK ADD CONSTRAINT [DF_PriceBatchDetail_EndedEarly] DEFAULT ((0))
	FOR [EndedEarly]
GO
IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF__PriceBatc__ReAut__6082CE3E]') AND type = 'D')
	ALTER TABLE [PriceBatchDetail] WITH NOCHECK ADD CONSTRAINT [DF__PriceBatc__ReAut__6082CE3E] DEFAULT ((0))
	FOR [ReAuthFlag]
GO
/******************************************************************************
		9. Operation Complete
******************************************************************************/
PRINT N'Status: 9. Operation Complete... ' + CONVERT(NVARCHAR(MAX), SYSDATETIME(), 9);
GO
