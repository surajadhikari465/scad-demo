<?xml version="1.0" encoding="UTF-8"?>
<pd:ProcessDefinition xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns="http://schemas.wfm.com/Mammoth/IrmaDbPrice.xsd" xmlns:pfx11="http://schemas.wfm.com/Enterprise/AmountMgmt/Amount/V1" xmlns:pfx10="http://schemas.wfm.com/Enterprise/UnitOfMeasureMgmt/UnitOfMeasure/V2" xmlns:pfx="http://schemas.wfm.com/Mammoth/R10Prices.xsd" xmlns:pd="http://xmlns.tibco.com/bw/process/2003" xmlns:ns2="http://schemas.wfm.com/Enterprise/ItemMgmt/BaseItem/V1" xmlns:ns1="http://schemas.wfm.com/Enterprise/RetailMgmt/CommonRefTypes/V1" xmlns:pfx5="http://schemas.wfm.com/Enterprise/LocaleMgmt/LocaleType/V2" xmlns:tib="http://www.tibco.com/bw/xslt/custom-functions" xmlns:pfx4="http://schemas.wfm.com/Enterprise/LocaleMgmt/Locale/V2" xmlns:pfx3="http://schemas.wfm.com/Enterprise/ItemMgmt/ItemType/V1" xmlns:pfx2="http://schemas.wfm.com/Enterprise/ItemMgmt/Item/V1" xmlns:pfx9="http://schemas.wfm.com/Enterprise/PriceMgmt/PriceType/V1" xmlns:pfx8="http://schemas.wfm.com/Enterprise/PriceMgmt/Price/V2" xmlns:pfx7="http://schemas.wfm.com/Enterprise/ItemMgmt/ScanCode/V2" xmlns:pfx6="http://schemas.wfm.com/Enterprise/ItemMgmt/ItemAttributesStore/V2">
    <xs:import xmlns:xs="http://www.w3.org/2001/XMLSchema" namespace="http://schemas.wfm.com/Mammoth/R10Prices.xsd" schemaLocation="/SharedResources/Schemas/Application/R10Prices.xsd"/>
    <xs:import xmlns:xs="http://www.w3.org/2001/XMLSchema" namespace="http://schemas.wfm.com/Enterprise/ItemMgmt/Item/V1" schemaLocation="/SharedResources/Schemas/wfm-2.3.0.2050/WholeFoodsMarket/Item/Item.xsd"/>
    <pd:name>Processes/Create Delete TPR.process</pd:name>
    <pd:startName>Start</pd:startName>
    <pd:startType ref="pfx:R10Price"/>
    <pd:startX>93</pd:startX>
    <pd:startY>73</pd:startY>
    <pd:returnBindings>
        <xsl:copy-of select="$Map-Data/pfx2:items"/>
    </pd:returnBindings>
    <pd:endName>End</pd:endName>
    <pd:endType ref="pfx2:items"/>
    <pd:endX>504</pd:endX>
    <pd:endY>75</pd:endY>
    <pd:errorSchemas/>
    <pd:processVariables/>
    <pd:targetNamespace>http://xmlns.example.com/1504619307993</pd:targetNamespace>
    <pd:activity name="Map Data">
        <pd:type>com.tibco.plugin.mapper.MapperActivity</pd:type>
        <pd:resourceType>ae.activities.MapperActivity</pd:resourceType>
        <pd:x>283</pd:x>
        <pd:y>74</pd:y>
        <config>
            <element ref="pfx2:items"/>
        </config>
        <pd:inputBindings>
            <pfx2:items>
                <pfx2:item>
                    <pfx2:id>
                        <xsl:value-of select="$Start/pfx:R10Price/pfx:ItemId"/>
                    </pfx2:id>
                    <pfx2:base>
                        <ns2:type>
                            <pfx3:code>
                                <xsl:value-of select="$Start/pfx:R10Price/pfx:ItemTypeCode"/>
                            </pfx3:code>
                            <pfx3:description>
                                <xsl:value-of select="$Start/pfx:R10Price/pfx:ItemTypeDesc"/>
                            </pfx3:description>
                        </ns2:type>
                    </pfx2:base>
                    <pfx2:locale>
                        <xsl:attribute name="ns1:Action">
                            <xsl:value-of select="&quot;Delete&quot;"/>
                        </xsl:attribute>
                        <pfx4:id>
                            <xsl:value-of select="$Start/pfx:R10Price/pfx:BusinessUnit_ID"/>
                        </pfx4:id>
                        <pfx4:name>
                            <xsl:value-of select="$Start/pfx:R10Price/pfx:LocaleName"/>
                        </pfx4:name>
                        <pfx4:type>
                            <pfx5:code>
                                <xsl:value-of select="&quot;STR&quot;"/>
                            </pfx5:code>
                            <pfx5:description>
                                <xsl:value-of select="&quot;Store&quot;"/>
                            </pfx5:description>
                        </pfx4:type>
                        <pfx4:storeItemAttributes>
                            <pfx6:scanCode>
                                <pfx7:id>
                                    <xsl:value-of select="$Start/pfx:R10Price/pfx:ScanCodeId"/>
                                </pfx7:id>
                                <pfx7:code>
                                    <xsl:value-of select="$Start/pfx:R10Price/pfx:ScanCode"/>
                                </pfx7:code>
                                <pfx7:typeId>
                                    <xsl:value-of select="$Start/pfx:R10Price/pfx:ScanCodeTypeId"/>
                                </pfx7:typeId>
                                <pfx7:typeDescription>
                                    <xsl:value-of select="$Start/pfx:R10Price/pfx:ScanCodeTypeDesc"/>
                                </pfx7:typeDescription>
                            </pfx6:scanCode>
                            <pfx6:prices>
                                <pfx8:price>
                                    <pfx8:type>
                                        <pfx9:id>
                                            <xsl:value-of select="&quot;TPR&quot;"/>
                                        </pfx9:id>
                                        <pfx9:description>
                                            <xsl:value-of select="&quot;Temporary Price Reduction&quot;"/>
                                        </pfx9:description>
                                    </pfx8:type>
                                    <pfx8:uom>
                                        <pfx10:code>
                                            <xsl:value-of select="$Start/pfx:R10Price/pfx:UomCode"/>
                                        </pfx10:code>
                                        <xsl:if test="$Start/pfx:R10Price/pfx:UomName">
                                            <pfx10:name>
                                                <xsl:value-of select="$Start/pfx:R10Price/pfx:UomName"/>
                                            </pfx10:name>
                                        </xsl:if>
                                    </pfx8:uom>
                                    <pfx8:currencyTypeCode>
                                        <xsl:value-of select="$Start/pfx:R10Price/pfx:CurrencyCode"/>
                                    </pfx8:currencyTypeCode>
                                    <pfx8:priceAmount>
                                        <xsl:if test="$Start/pfx:R10Price/pfx:PreviousSalePrice">
                                            <pfx11:amount>
                                                <xsl:value-of select="$Start/pfx:R10Price/pfx:PreviousSalePrice"/>
                                            </pfx11:amount>
                                        </xsl:if>
                                    </pfx8:priceAmount>
                                    <pfx8:priceMultiple>
                                        <xsl:value-of select="if(exists($Start/pfx:R10Price/pfx:PreviousSaleMultiple)) then $Start/pfx:R10Price/pfx:PreviousSaleMultiple&#xA;else 1"/>
                                    </pfx8:priceMultiple>
                                    <pfx8:priceStartDate>
                                        <xsl:value-of select="if(exists($Start/pfx:R10Price/pfx:PreviousSaleStartDate)) then $Start/pfx:R10Price/pfx:PreviousSaleStartDate&#xA;else current-date()"/>
                                    </pfx8:priceStartDate>
                                    <pfx8:priceEndDate>
                                        <xsl:value-of select="if(exists($Start/pfx:R10Price/pfx:PreviousSaleEndDate) )then&#xA; tib:add-to-dateTime($Start/pfx:R10Price/pfx:PreviousSaleEndDate, 0,0,0,23,59,59) &#xA;else current-date()"/>
                                    </pfx8:priceEndDate>
                                </pfx8:price>
                            </pfx6:prices>
                        </pfx4:storeItemAttributes>
                    </pfx2:locale>
                </pfx2:item>
            </pfx2:items>
        </pd:inputBindings>
    </pd:activity>
    <pd:transition>
        <pd:from>Start</pd:from>
        <pd:to>Map Data</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
    <pd:transition>
        <pd:from>Map Data</pd:from>
        <pd:to>End</pd:to>
        <pd:lineType>Default</pd:lineType>
        <pd:lineColor>-16777216</pd:lineColor>
        <pd:conditionType>always</pd:conditionType>
    </pd:transition>
</pd:ProcessDefinition>