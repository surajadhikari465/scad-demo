@using Infragistics.Web.Mvc

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{Html.RenderPartial("_HeaderPartial", "Certification Agency Management");}

<div class="page-subsection">@Html.ActionLink("Add New Agency", "Create")</div>

<hr />

<div id="CertificationAgencies" class="page-section">

    @Html.ActionLink("Export All Certification Agencies", "CertificationAgencyExport", "Excel", null, new { @class = "btn btn-light form-submit" })

    <hr />

    @(Html.Infragistics().Grid<Icon.Web.Mvc.Models.CertificationAgencyViewModel>()
            .ID("CertificationAgencyGrid")
            .PrimaryKey("HierarchyClassId")
            .AvgRowHeight("30px")
            .Height("600px")
            .Width("100%")
            .AutoGenerateColumns(false)
            .Columns(columns =>
            {
                columns.For(c => c.HierarchyClassId).HeaderText("Agency ID").DataType("number").Width("10%");
                columns.For(c => c.AgencyName).HeaderText("Agency Name").DataType("string").Width("20%")
                            .Template("{{if ${DefaultOrganic} }}"
                            + "<b>${AgencyName}</b>"
                            + "{{else}}"
                            + "${AgencyName}"
                            + "{{/if}}"); 
                columns.For(c => c.GlutenFree).HeaderText("Gluten Free").DataType("bool").Width("10%").Format("checkbox");
                columns.For(c => c.Kosher).HeaderText("Kosher").DataType("bool").Width("10%").Format("checkbox");
                columns.For(c => c.NonGMO).HeaderText("Non-GMO").DataType("bool").Width("10%").Format("checkbox");
                columns.For(c => c.Organic).HeaderText("Organic").DataType("bool").Width("7%").Format("checkbox");
                columns.For(c => c.DefaultOrganic).HeaderText("Default Organic").DataType("bool").Width("8%").Format("checkbox");
                columns.For(c => c.Vegan).HeaderText("Vegan").DataType("bool").Width("10%").Format("checkbox");
                columns.Unbound("Edit").Template("<a href='/CertificationAgency/Edit?hierarchyClassId=${HierarchyClassId}'>Edit</a>").Width("5%").HeaderText("Edit Link");
                columns.Unbound("Delete").Width("10%").HeaderText("Delete Link")
                            .Template("{{if ${DefaultOrganic} }}"
                            + "&nbsp;"
                            + "{{else}}"
                            + "<a href='/CertificationAgency/Delete?hierarchyClassId=${HierarchyClassId}'>Delete</a>"
                            + "{{/if}}");
            })
            .Features(features =>
            {
                features.Paging().PageSize(20);
                features.Sorting().Inherit(true);
                features.Filtering().Inherit(true);

            })
            .DataSourceUrl(Url.Action("All", "CertificationAgency"))
            .DataBind()
            .Render()
    )

    <div class="search-alert page-subsection"></div>
</div>

@section scripts
{
    @Scripts.Render("~/Scripts/jquery.fileDownload.js")
}
