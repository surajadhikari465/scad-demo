@using Infragistics.Web.Mvc
@using Icon.Web.DataAccess.Models
@model Icon.Web.Mvc.Models.BulkImportViewModel<BulkImportBrandModel>

@{
    ViewBag.Title = "Import";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{Html.RenderPartial("_HeaderPartial", "Bulk Brand Import");}

<div class="page-section">
    <hr />
    @if (Model.ValidItemsCount == 0)
    {
        <h4>No brands have been imported.</h4>
    }
    else
    {
        <h4>Successfully imported @Model.ValidItemsCount Brands.</h4>
    }
    <div>@Html.ActionLink("Back To Bulk Brand Import", "Index") | @Html.ActionLink("Back To Brands", "Index", "Brand", null, null)</div>
</div>

@if (Model.ErrorItems.Count > 0)
{
    <div class="page-section">
        <hr />
        <div class="page-subsection">
            <h4>Errors were found for the following brands.  You may export these brands, make corrections, and attempt the import again.</h4>
        </div>

        <div class="page-subsection">
            @(Html.Infragistics().Grid(Model.ErrorItems.AsQueryable())
                .ID("igGrid")
                .Width("100%")
                .AutoGenerateColumns(false)
                .Columns(column =>
                {
                    column.For(b => b.BrandLineage).HeaderText("Brand").Width("20%");
                    column.For(b => b.BrandAbbreviation).HeaderText("BrandAbbreviation").Width("15%");
                    column.For(b => b.Error).HeaderText("Error").Width("65%");
                })
                .Features(features =>
                {
                    features.Paging().PageSize(20);
                    features.Resizing();
                    features.Sorting().ApplyColumnCss(false);
                    features.Tooltips()
                        .Visibility(TooltipsVisibility.Overflow);
                })
                .DataBind()
                .Render()
            )
        </div>

        @Html.ActionLink("Export", "BulkBrandExport", "Excel", null, new { @class = "btn btn-light form-submit" })
    </div>
}