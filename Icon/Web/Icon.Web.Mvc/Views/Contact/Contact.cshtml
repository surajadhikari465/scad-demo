@using Icon.Web.Mvc.Utility
@using Infragistics.Web.Mvc
@model Icon.Web.Mvc.Models.HierarchyClassViewModel


@{
    ViewBag.Title = "Contact Info";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="page-section mb-2">
    @Html.HiddenFor(model => model.HierarchyClassId, new { @id = "hcId" })

    <div id="divLinks">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" style="margin-right: 10px">Export</a>
        <ul class="dropdown-menu bg-light">
            <li class="nav-item">@Html.ActionLink("All Contacts", "Export", "Contact", new { hierarchyClassId = 0 }, new { @class = "text-nowrap ml-3" })</li>
            <li class="nav-item">@Html.ActionLink("Current Contacts", "Export", "Contact", new { hierarchyClassId = Model.HierarchyClassId }, new { @class = "text-nowrap ml-3" })</li>
        </ul>

        @if (ViewHelpers.HasWriteAccess(Request, User))
        {
            <span class="ml-3">@Html.ActionLink("Back To " + Model.HierarchyLevelName + "s", "Index", Model.HierarchyLevelName)</span>
            <span class="ml-3">@Html.ActionLink("Back To Edit", "Edit", Model.HierarchyLevelName, new { hierarchyClassId = Model.HierarchyClassId }, null)</span>
            <span class="ml-3">@Html.ActionLink("Add New Contact", "Manage", "Contact", new { hierarchyClassId = Model.HierarchyClassId, contactId = 0 }, null)</span>
        }
    </div>

    <div class="jumbotron-flex text-center my-3">
        <h2>Contact Management</h2>
        <p class="lead">@((Model == null ? "" : Model.HierarchyLevelName + ": " + Model.HierarchyClassName))</p>
    </div>

    <div class="col-10 offset-1">
        <div class="clearfix">
            <span class="float-lg-right my-3 text-secondary">@(Model == null || Model.ContactLastUpdatedBy == null ? "Last updated unknown" : @Model.ContactLastUpdatedBy.Trim())</span>
        </div>

        <div>
            <table id="tblContact" class="display stripe compact" style="width:100%;">
                <thead>
                    <tr>
                        <th></th>
                        <th>Contact Id</th>
                        <th>Contact Type</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Title</th>
                        <th>Phone</th>
                        <th></th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

<div id="dlgConfirm" title="User Confirmation Required" style="display:none;">
    <div style="max-height:300px; box-sizing:border-box;">
        <p id="dlgContact" />
        <p id="dlgMsg" />
    </div>
</div>

<div class="dropdown-menu" aria-labelledby="dropdownMenuButton" id="context-menu">
    <a class="dropdown-item fa fa-edit" href="#" id="mnuEdit">&nbsp;&nbsp;&nbsp;Edit</a>
    <a class="dropdown-item fa fa-address-card" href="#" id="mnuDetail">&nbsp;&nbsp;&nbsp;Details</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item text-danger fa fa-eraser" href="#" id="mnuDelete">&nbsp;&nbsp;&nbsp;Delete</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item fa fa-close text-secondary" href="#" id="mnuCancel">&nbsp;&nbsp;&nbsp;Cancel</a>
</div>

@section scripts
{
    @Scripts.Render("~/Scripts/Contact/contact.js")
}

<link rel="stylesheet" type="text/css" href="~/Content/datatables.css" />
