@using Infragistics.Web.Mvc
@model Icon.Web.Mvc.Models.EwicExclusionViewModel

@{
    ViewBag.Title = "Exclusions";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{Html.RenderPartial("_HeaderPartial", "eWIC Exclusions");}

<hr />

<div class="page-section row">
    @using (Html.BeginForm("AddExclusion", "Ewic", FormMethod.Post, new { @class = "begin-form col-md-6" }))
    {
        <fieldset>
            <legend>Add New Exclusion</legend>
            <div class="form-inline">
                <div class="form-group">
                    @Html.TextBoxFor(model => Model.NewExclusion, null, new { @class = "form-control", @id = "newExclusion" })
                </div>
                <input type="submit" value="Add Exclusion" class="btn btn-default" id="addButton" />
                @Html.ValidationMessageFor(model => model.NewExclusion, null, new { @class = "form-property-val" })
            </div>
        </fieldset>
    }
    
    @using (Html.BeginForm("RemoveExclusion", "Ewic", FormMethod.Post, new { @class = "begin-form col-md-6" }))
    {
        <fieldset>
            <legend>Remove Existing Exclusion</legend>
            <div class="form-inline">
                <div class="form-group">
                    @Html.DropDownListFor(model => Model.RemovedExclusionSelectedId, Model.RemovableEwicExclusions, "--Select Exclusion--", new { @class = "form-control" })
                </div>
                <input type="submit" value="Remove Exclusion" class="btn btn-default" id="removeButton" />
            </div>
        </fieldset>
    }
</div>

<div class="validation-section page-subsection" id="alert">
    @if (ViewData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissable">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <strong>@ViewData["SuccessMessage"].ToString()</strong>
        </div>
    }
    @if (ViewData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissable">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <strong>@ViewData["ErrorMessage"].ToString()</strong>
        </div>
    }
</div>

<div class="page-section">
    <hr />

    @if (Model.CurrentExclusions.Count == 0)
    {
        <div class="page-subsection">
            <h4>No current exclusions found.</h4>
        </div>
    }
    else
    {
        <div class="page-section">
            <h4>Current Exclusions</h4>
        </div>
        
        <div class="page-subsection">
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Scan Code</th>
                        <th>Product Description</th>
                    </tr>
                </thead>
                @foreach (var exclusion in Model.CurrentExclusions)
                {
                    <tbody>
                        <tr>
                            <td>@exclusion.ScanCode</td>
                            <td>@exclusion.ProductDescription</td>
                        </tr>
                    </tbody>
                }
            </table>
        </div>
    }
</div>

@section scripts
{
    @Scripts.Render("~/Scripts/Ewic/exclusions.js")
    @Scripts.Render("~/Scripts/jquery-disable.js")
    @Scripts.Render("~/Scripts/Common/display-alert.js")
}
