@model Icon.Dashboard.Mvc.ViewModels.EsbEnvironmentViewModel

@{ 
    var action = (ViewBag.Action ?? Request.RequestContext.RouteData.Values["action"]).ToString();
    string buttonText = action == "Details" ? $"Make {Model.Name} Environment Active" : Model.Name;
}

@Ajax.ActionLink(
    buttonText, 
    "SetEsbEnvironment",
    "EsbSwitch",
    new { name = Model.Name },
    new AjaxOptions { HttpMethod = "POST", OnSuccess = "setEsbEnvironmentSuccess", OnBegin = "setEsbEnvironmentBegin" },
    new { @class = "btn btn-success btn-block set-esb-btn" })

