<?xml version="1.0" encoding="utf-8"?>
<Report xmlns="http://schemas.microsoft.com/sqlserver/reporting/2005/01/reportdefinition" xmlns:rd="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner">
  <DataSources>
    <DataSource Name="ItemCatalog">
      <DataSourceReference>ItemCatalog</DataSourceReference>
      <rd:DataSourceID>e66fae55-47ff-4d09-aa17-ac64eaa81e81</rd:DataSourceID>
    </DataSource>
  </DataSources>
  <BottomMargin>1in</BottomMargin>
  <RightMargin>1in</RightMargin>
  <rd:DrawGrid>true</rd:DrawGrid>
  <InteractiveWidth>8.5in</InteractiveWidth>
  <rd:SnapToGrid>true</rd:SnapToGrid>
  <Body>
    <Height>2in</Height>
  </Body>
  <rd:ReportID>f3ad3a50-cd9d-4640-8ae2-12633b0fec3f</rd:ReportID>
  <LeftMargin>1in</LeftMargin>
  <DataSets>
    <DataSet Name="Report_ER_Test">
      <Query>
        <rd:UseGenericDesigner>true</rd:UseGenericDesigner>
        <CommandText>select
     st.store_name
     , ss.date_key
    -- , convert(datetime, convert(varchar, ss.date_key, 105), 105)
     , b.brand_name as brand
     , (substring('0000000000000', 1, 13 - len(rtrim(cast(id.identifier as bigint))))+ rtrim(id.identifier)) as item_key
     , i.item_description
     , RTRIM(i.package_desc2) as item_size
     , u.unit_name as uom
     , fn_AvgCostHistory(id.item_key,st.store_no,i.subteam_no,ss.date_key)
     , sum(ss.sales_quantity-ss.return_quantity) as units
     , sum(ss.sales_amount-ss.return_amount) as dollars
from
     itemidentifier id
     , sales_sumbyitem ss
     , item i
     , itembrand b
     , store st
     , itemunit u
where
     ss.item_key = id.item_key
     and ss.item_key = i.item_key
     and i.item_key = id.item_key
     and b.brand_id = i.brand_id
     and ss.store_no = st.store_no
     and u.unit_id = i.retail_unit_id
group by 
     st.store_name
     , date_key
     , b.brand_name
     , ss.item_key
     , id.identifier
     , i.item_description
     , i.package_desc2
     , u.unit_name</CommandText>
        <DataSourceName>ItemCatalog</DataSourceName>
      </Query>
      <Fields>
        <Field Name="store_name">
          <rd:TypeName>System.String</rd:TypeName>
          <DataField>store_name</DataField>
        </Field>
        <Field Name="date_key">
          <rd:TypeName>System.DateTime</rd:TypeName>
          <DataField>date_key</DataField>
        </Field>
        <Field Name="brand">
          <rd:TypeName>System.String</rd:TypeName>
          <DataField>brand</DataField>
        </Field>
        <Field Name="item_key">
          <rd:TypeName>System.String</rd:TypeName>
          <DataField>item_key</DataField>
        </Field>
        <Field Name="item_description">
          <rd:TypeName>System.String</rd:TypeName>
          <DataField>item_description</DataField>
        </Field>
        <Field Name="item_size">
          <rd:TypeName>System.String</rd:TypeName>
          <DataField>item_size</DataField>
        </Field>
        <Field Name="uom">
          <rd:TypeName>System.String</rd:TypeName>
          <DataField>uom</DataField>
        </Field>
        <Field Name="units">
          <rd:TypeName>System.Int32</rd:TypeName>
          <DataField>units</DataField>
        </Field>
        <Field Name="dollars">
          <rd:TypeName>System.Decimal</rd:TypeName>
          <DataField>dollars</DataField>
        </Field>
      </Fields>
    </DataSet>
  </DataSets>
  <Width>6.5in</Width>
  <InteractiveHeight>11in</InteractiveHeight>
  <Language>en-US</Language>
  <TopMargin>1in</TopMargin>
</Report>